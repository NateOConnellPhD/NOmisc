% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/review_panel_etc.R
\name{panel_finish_time}
\alias{panel_finish_time}
\title{Grant panel time-to-completion estimator with scheduled breaks}
\usage{
panel_finish_time(
  begin_hhmm,
  review_total,
  reviews_completed,
  break_hhmm = NULL,
  break_lens = NULL,
  planned_mean = 12,
  prior_n = 6,
  T = Sys.time(),
  tz = attr(T, "tzone"),
  date = as.Date(T),
  print_console = TRUE,
  plot = TRUE
)
}
\arguments{
\item{begin_hhmm}{Character scalar giving the panel start time on a 24-hour
clock. Accepts \code{"HH:MM"}, \code{"H:MM"}, or \code{"HHMM"} (e.g.,
\code{"09:36"} or \code{"936"}). Interpreted on \code{date}.}

\item{review_total}{Integer scalar, total number of grants/reviews scheduled.}

\item{reviews_completed}{Integer scalar, number of grants/reviews completed so far.}

\item{break_hhmm}{Optional character vector of break start times on a 24-hour
clock (same formats as \code{begin_hhmm}). Interpreted on \code{date}.}

\item{break_lens}{Optional numeric vector of break lengths in minutes. Must
have the same length as \code{break_hhmm}.}

\item{planned_mean}{Numeric scalar, planned minutes per review used as the
shrinkage target.}

\item{prior_n}{Non-negative numeric scalar. Strength of the shrinkage toward
\code{planned_mean}, interpreted as "pseudo-reviews".}

\item{T}{POSIXct giving the "current time" for the calculation. Defaults to
\code{Sys.time()}.}

\item{tz}{Character scalar. Time zone used for parsing and printing times.}

\item{date}{Date used to interpret \code{begin_hhmm} and \code{break_hhmm}.
Defaults to today's date in \code{tz} (based on \code{T}).}

\item{print_console}{Logical; if \code{TRUE}, prints a summary block to the console.}

\item{plot}{Logical; if \code{TRUE}, draws the timeline plot (requires \pkg{ggplot2}).}
}
\value{
Invisibly returns a list with elements:
\describe{
\item{review_remain}{Number of reviews remaining.}
\item{elapsed_minutes}{Elapsed minutes since \code{begin_hhmm}.}
\item{avg_rev_time_emp}{Empirical mean minutes per review (\code{elapsed_minutes / reviews_completed}) or \code{NA} if \code{reviews_completed == 0}.}
\item{avg_rev_time_est}{Stabilized mean minutes per review (shrinkage estimate).}
\item{work_minutes}{Estimated work minutes remaining (excluding breaks).}
\item{breaks_added_min}{Total minutes of overlapping breaks added.}
\item{T_fin}{POSIXct estimated completion time.}
\item{total_minutes_left}{Estimated minutes remaining until completion.}
\item{plot}{A \code{ggplot} object if \code{plot=TRUE} and \pkg{ggplot2} is available; otherwise \code{NULL}.}
}
}
\description{
Estimates remaining time in a grant review panel using a stabilized average
review duration and a set of scheduled breaks. The stabilized average uses
pseudo-count shrinkage toward a planned timer:
\deqn{\hat\mu = \frac{prior\_n \cdot planned\_mean + S}{prior\_n + n},}
where \eqn{S} is elapsed minutes since \code{begin_hhmm} and \eqn{n} is the
number of completed reviews. Scheduled breaks that overlap the projected
work window are added to the completion time.
}
\details{
By default, the function prints a console summary and (optionally) draws a
timeline plot. Break periods are embedded into the main timeline (thicker
segments on the same line), and the information panel is placed at the
bottom center of the plot.
}
\examples{
\dontrun{
panel_finish_time(
  begin_hhmm = "09:36",
  review_total = 40,
  reviews_completed = 3,
  break_hhmm = c("11:30", "13:45", "16:15"),
  break_lens = c(15, 30, 15),
  planned_mean = 15,
  prior_n = 10
)
}

}
